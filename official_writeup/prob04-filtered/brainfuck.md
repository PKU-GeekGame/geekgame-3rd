# Brainfuck 解释程序

## 功能

用一大堆正则替换规则解释执行 Brainfuck，输出得到的结果。

## 笑点解析

没什么技巧，纯靠嗯写，主打一个大力出奇迹，干就完了（干！就……完了！）。

这个故事告诉我们，如果你想出一道题折磨大家，那你必须先折磨自己（

### 准备工作

首先把所有无关的字符都图图了，不利于解释 Brainfuck 的话不要说：

```
把【[^><+-.,[\]]】替换成【】喵
```

然后，为了标记目前程序解释执行到哪里了，我们需要给程序的开头加一个指针（字面意义）：

```
把【^】替换成【👉】喵
```

指针指向的字符就是接下来需要解释的字符。

最后，解释执行的过程中，解释器需要维护一些内部的状态，包括：

* 记录目前 `.` 操作已经输出的字符，用👄表示，令人忍俊不禁。
* 记录循环操作（`[` 和 `]`）嵌套的层数，用🔄表示，令人忍俊不禁。
* 记录目前各 memory cell 的状态，用✋和之前的内容分隔，令人忍俊不禁。
* 记录当前指针指向了哪一个 memory cell。由于我们已经用过👉了，在这里我们用🤑表示 memory cell 的指针，因为我希望你 V 我 50%，令人忍俊不禁。

```
把【$】替换成【\n👄\n🔄\n✋\n🤑\n】喵
```

### 判断当前操作

解释器的本质就是取指译码执行。

于是接下来根据当前指针指向的指令，跳转执行对应的操作。那么……

接下来干嘛呢：

```
如果看到【👉>】就跳转到【右转】喵
如果看到【👉<】就跳转到【左转】喵
如果看到【👉\+】就跳转到【多点】喵
如果看到【👉-】就跳转到【少点】喵
如果看到【👉\.】就跳转到【看看我的】喵
如果看到【👉,】就跳转到【看看你的】喵
如果看到【👉\[】就跳转到【绯红之王】喵
如果看到【👉\]】就跳转到【败者食尘】喵
如果看到【^】就跳转到【已经回不去了】喵
```

### 转个弯先

`>` 和 `<` 负责让 memory cell 指针左右移动。

这个很好实现，只需要把左右移动改成让刚刚我们定义的🤑上下移动就行了。

当然，如果🤑碰到了✋就不要再移动了，会变得奇怪的❤️～

注意在移动完 memory cell 指针之后，为了执行下一条指令，还需要向后移动👉，其他指令同理。

右转：

```
把【🤑(.*)\n】替换成【\1\n🤑】喵
把【🤑$】替换成【🤑\n】喵
把【👉>】替换成【>👉】喵
如果看到【^】就跳转到【接下来干嘛呢】喵
```

左转：

```
把【([^✋])([^✋\n]*)\n🤑】替换成【\1🤑\2\n】喵
把【👉<】替换成【<👉】喵
如果看到【^】就跳转到【接下来干嘛呢】喵
```

### 搞点钱

可以用💰表示 memory cell 里的数据，一个💰就是 1，十个💰就是 10，50 个💰就是疯狂星期四。

钱呢自然有多少之分……

多点：

```
把【🤑】替换成【🤑💰】喵
把【👉\+】替换成【+👉】喵
如果看到【^】就跳转到【接下来干嘛呢】喵
```

少点：

```
把【🤑💰】替换成【🤑】喵
把【👉-】替换成【-👉】喵
如果看到【^】就跳转到【接下来干嘛呢】喵
```

### 最无聊的一集

实现输出，实际就是把 memory cell 里的💰转换成字符扔到👄里。

这部分相当无聊，建议写个脚本生成。

看看我的：

```
  如果没看到【🤑💰{32}\n】就跳转到【狠狠地输出 ，啊，结束了】喵
  把【👄】替换成【 👄】喵
狠狠地输出 ，啊，结束了：
  如果没看到【🤑💰{33}\n】就跳转到【狠狠地输出!，啊，结束了】喵
  把【👄】替换成【!👄】喵
狠狠地输出!，啊，结束了：
  如果没看到【🤑💰{34}\n】就跳转到【狠狠地输出"，啊，结束了】喵
  把【👄】替换成【"👄】喵
狠狠地输出"，啊，结束了：
  如果没看到【🤑💰{35}\n】就跳转到【狠狠地输出#，啊，结束了】喵
  把【👄】替换成【#👄】喵
狠狠地输出#，啊，结束了：
  如果没看到【🤑💰{36}\n】就跳转到【狠狠地输出$，啊，结束了】喵
  把【👄】替换成【$👄】喵
狠狠地输出$，啊，结束了：
  如果没看到【🤑💰{37}\n】就跳转到【狠狠地输出%，啊，结束了】喵
  把【👄】替换成【%👄】喵
狠狠地输出%，啊，结束了：
  如果没看到【🤑💰{38}\n】就跳转到【狠狠地输出&，啊，结束了】喵
  把【👄】替换成【&👄】喵
狠狠地输出&，啊，结束了：
  如果没看到【🤑💰{39}\n】就跳转到【狠狠地输出'，啊，结束了】喵
  把【👄】替换成【'👄】喵
狠狠地输出'，啊，结束了：
  如果没看到【🤑💰{40}\n】就跳转到【狠狠地输出(，啊，结束了】喵
  把【👄】替换成【(👄】喵
狠狠地输出(，啊，结束了：
  如果没看到【🤑💰{41}\n】就跳转到【狠狠地输出)，啊，结束了】喵
  把【👄】替换成【)👄】喵
狠狠地输出)，啊，结束了：
  如果没看到【🤑💰{42}\n】就跳转到【狠狠地输出*，啊，结束了】喵
  把【👄】替换成【*👄】喵
狠狠地输出*，啊，结束了：
  如果没看到【🤑💰{43}\n】就跳转到【狠狠地输出+，啊，结束了】喵
  把【👄】替换成【+👄】喵
狠狠地输出+，啊，结束了：
  如果没看到【🤑💰{44}\n】就跳转到【狠狠地输出,，啊，结束了】喵
  把【👄】替换成【,👄】喵
狠狠地输出,，啊，结束了：
  如果没看到【🤑💰{45}\n】就跳转到【狠狠地输出-，啊，结束了】喵
  把【👄】替换成【-👄】喵
狠狠地输出-，啊，结束了：
  如果没看到【🤑💰{46}\n】就跳转到【狠狠地输出.，啊，结束了】喵
  把【👄】替换成【.👄】喵
狠狠地输出.，啊，结束了：
  如果没看到【🤑💰{47}\n】就跳转到【狠狠地输出/，啊，结束了】喵
  把【👄】替换成【/👄】喵
狠狠地输出/，啊，结束了：
  如果没看到【🤑💰{48}\n】就跳转到【狠狠地输出0，啊，结束了】喵
  把【👄】替换成【0👄】喵
狠狠地输出0，啊，结束了：
  如果没看到【🤑💰{49}\n】就跳转到【狠狠地输出1，啊，结束了】喵
  把【👄】替换成【1👄】喵
狠狠地输出1，啊，结束了：
  如果没看到【🤑💰{50}\n】就跳转到【狠狠地输出2，啊，结束了】喵
  把【👄】替换成【2👄】喵
狠狠地输出2，啊，结束了：
  如果没看到【🤑💰{51}\n】就跳转到【狠狠地输出3，啊，结束了】喵
  把【👄】替换成【3👄】喵
狠狠地输出3，啊，结束了：
  如果没看到【🤑💰{52}\n】就跳转到【狠狠地输出4，啊，结束了】喵
  把【👄】替换成【4👄】喵
狠狠地输出4，啊，结束了：
  如果没看到【🤑💰{53}\n】就跳转到【狠狠地输出5，啊，结束了】喵
  把【👄】替换成【5👄】喵
狠狠地输出5，啊，结束了：
  如果没看到【🤑💰{54}\n】就跳转到【狠狠地输出6，啊，结束了】喵
  把【👄】替换成【6👄】喵
狠狠地输出6，啊，结束了：
  如果没看到【🤑💰{55}\n】就跳转到【狠狠地输出7，啊，结束了】喵
  把【👄】替换成【7👄】喵
狠狠地输出7，啊，结束了：
  如果没看到【🤑💰{56}\n】就跳转到【狠狠地输出8，啊，结束了】喵
  把【👄】替换成【8👄】喵
狠狠地输出8，啊，结束了：
  如果没看到【🤑💰{57}\n】就跳转到【狠狠地输出9，啊，结束了】喵
  把【👄】替换成【9👄】喵
狠狠地输出9，啊，结束了：
  如果没看到【🤑💰{58}\n】就跳转到【狠狠地输出:，啊，结束了】喵
  把【👄】替换成【:👄】喵
狠狠地输出:，啊，结束了：
  如果没看到【🤑💰{59}\n】就跳转到【狠狠地输出;，啊，结束了】喵
  把【👄】替换成【;👄】喵
狠狠地输出;，啊，结束了：
  如果没看到【🤑💰{60}\n】就跳转到【狠狠地输出<，啊，结束了】喵
  把【👄】替换成【<👄】喵
狠狠地输出<，啊，结束了：
  如果没看到【🤑💰{61}\n】就跳转到【狠狠地输出=，啊，结束了】喵
  把【👄】替换成【=👄】喵
狠狠地输出=，啊，结束了：
  如果没看到【🤑💰{62}\n】就跳转到【狠狠地输出>，啊，结束了】喵
  把【👄】替换成【>👄】喵
狠狠地输出>，啊，结束了：
  如果没看到【🤑💰{63}\n】就跳转到【狠狠地输出?，啊，结束了】喵
  把【👄】替换成【?👄】喵
狠狠地输出?，啊，结束了：
  如果没看到【🤑💰{64}\n】就跳转到【狠狠地输出@，啊，结束了】喵
  把【👄】替换成【@👄】喵
狠狠地输出@，啊，结束了：
  如果没看到【🤑💰{65}\n】就跳转到【狠狠地输出A，啊，结束了】喵
  把【👄】替换成【A👄】喵
狠狠地输出A，啊，结束了：
  如果没看到【🤑💰{66}\n】就跳转到【狠狠地输出B，啊，结束了】喵
  把【👄】替换成【B👄】喵
狠狠地输出B，啊，结束了：
  如果没看到【🤑💰{67}\n】就跳转到【狠狠地输出C，啊，结束了】喵
  把【👄】替换成【C👄】喵
狠狠地输出C，啊，结束了：
  如果没看到【🤑💰{68}\n】就跳转到【狠狠地输出D，啊，结束了】喵
  把【👄】替换成【D👄】喵
狠狠地输出D，啊，结束了：
  如果没看到【🤑💰{69}\n】就跳转到【狠狠地输出E，啊，结束了】喵
  把【👄】替换成【E👄】喵
狠狠地输出E，啊，结束了：
  如果没看到【🤑💰{70}\n】就跳转到【狠狠地输出F，啊，结束了】喵
  把【👄】替换成【F👄】喵
狠狠地输出F，啊，结束了：
  如果没看到【🤑💰{71}\n】就跳转到【狠狠地输出G，啊，结束了】喵
  把【👄】替换成【G👄】喵
狠狠地输出G，啊，结束了：
  如果没看到【🤑💰{72}\n】就跳转到【狠狠地输出H，啊，结束了】喵
  把【👄】替换成【H👄】喵
狠狠地输出H，啊，结束了：
  如果没看到【🤑💰{73}\n】就跳转到【狠狠地输出I，啊，结束了】喵
  把【👄】替换成【I👄】喵
狠狠地输出I，啊，结束了：
  如果没看到【🤑💰{74}\n】就跳转到【狠狠地输出J，啊，结束了】喵
  把【👄】替换成【J👄】喵
狠狠地输出J，啊，结束了：
  如果没看到【🤑💰{75}\n】就跳转到【狠狠地输出K，啊，结束了】喵
  把【👄】替换成【K👄】喵
狠狠地输出K，啊，结束了：
  如果没看到【🤑💰{76}\n】就跳转到【狠狠地输出L，啊，结束了】喵
  把【👄】替换成【L👄】喵
狠狠地输出L，啊，结束了：
  如果没看到【🤑💰{77}\n】就跳转到【狠狠地输出M，啊，结束了】喵
  把【👄】替换成【M👄】喵
狠狠地输出M，啊，结束了：
  如果没看到【🤑💰{78}\n】就跳转到【狠狠地输出N，啊，结束了】喵
  把【👄】替换成【N👄】喵
狠狠地输出N，啊，结束了：
  如果没看到【🤑💰{79}\n】就跳转到【狠狠地输出O，啊，结束了】喵
  把【👄】替换成【O👄】喵
狠狠地输出O，啊，结束了：
  如果没看到【🤑💰{80}\n】就跳转到【狠狠地输出P，啊，结束了】喵
  把【👄】替换成【P👄】喵
狠狠地输出P，啊，结束了：
  如果没看到【🤑💰{81}\n】就跳转到【狠狠地输出Q，啊，结束了】喵
  把【👄】替换成【Q👄】喵
狠狠地输出Q，啊，结束了：
  如果没看到【🤑💰{82}\n】就跳转到【狠狠地输出R，啊，结束了】喵
  把【👄】替换成【R👄】喵
狠狠地输出R，啊，结束了：
  如果没看到【🤑💰{83}\n】就跳转到【狠狠地输出S，啊，结束了】喵
  把【👄】替换成【S👄】喵
狠狠地输出S，啊，结束了：
  如果没看到【🤑💰{84}\n】就跳转到【狠狠地输出T，啊，结束了】喵
  把【👄】替换成【T👄】喵
狠狠地输出T，啊，结束了：
  如果没看到【🤑💰{85}\n】就跳转到【狠狠地输出U，啊，结束了】喵
  把【👄】替换成【U👄】喵
狠狠地输出U，啊，结束了：
  如果没看到【🤑💰{86}\n】就跳转到【狠狠地输出V，啊，结束了】喵
  把【👄】替换成【V👄】喵
狠狠地输出V，啊，结束了：
  如果没看到【🤑💰{87}\n】就跳转到【狠狠地输出W，啊，结束了】喵
  把【👄】替换成【W👄】喵
狠狠地输出W，啊，结束了：
  如果没看到【🤑💰{88}\n】就跳转到【狠狠地输出X，啊，结束了】喵
  把【👄】替换成【X👄】喵
狠狠地输出X，啊，结束了：
  如果没看到【🤑💰{89}\n】就跳转到【狠狠地输出Y，啊，结束了】喵
  把【👄】替换成【Y👄】喵
狠狠地输出Y，啊，结束了：
  如果没看到【🤑💰{90}\n】就跳转到【狠狠地输出Z，啊，结束了】喵
  把【👄】替换成【Z👄】喵
狠狠地输出Z，啊，结束了：
  如果没看到【🤑💰{91}\n】就跳转到【狠狠地输出[，啊，结束了】喵
  把【👄】替换成【[👄】喵
狠狠地输出[，啊，结束了：
  如果没看到【🤑💰{92}\n】就跳转到【狠狠地输出\，啊，结束了】喵
  把【👄】替换成【\👄】喵
狠狠地输出\，啊，结束了：
  如果没看到【🤑💰{93}\n】就跳转到【狠狠地输出]，啊，结束了】喵
  把【👄】替换成【]👄】喵
狠狠地输出]，啊，结束了：
  如果没看到【🤑💰{94}\n】就跳转到【狠狠地输出^，啊，结束了】喵
  把【👄】替换成【^👄】喵
狠狠地输出^，啊，结束了：
  如果没看到【🤑💰{95}\n】就跳转到【狠狠地输出_，啊，结束了】喵
  把【👄】替换成【_👄】喵
狠狠地输出_，啊，结束了：
  如果没看到【🤑💰{96}\n】就跳转到【狠狠地输出`，啊，结束了】喵
  把【👄】替换成【`👄】喵
狠狠地输出`，啊，结束了：
  如果没看到【🤑💰{97}\n】就跳转到【狠狠地输出a，啊，结束了】喵
  把【👄】替换成【a👄】喵
狠狠地输出a，啊，结束了：
  如果没看到【🤑💰{98}\n】就跳转到【狠狠地输出b，啊，结束了】喵
  把【👄】替换成【b👄】喵
狠狠地输出b，啊，结束了：
  如果没看到【🤑💰{99}\n】就跳转到【狠狠地输出c，啊，结束了】喵
  把【👄】替换成【c👄】喵
狠狠地输出c，啊，结束了：
  如果没看到【🤑💰{100}\n】就跳转到【狠狠地输出d，啊，结束了】喵
  把【👄】替换成【d👄】喵
狠狠地输出d，啊，结束了：
  如果没看到【🤑💰{101}\n】就跳转到【狠狠地输出e，啊，结束了】喵
  把【👄】替换成【e👄】喵
狠狠地输出e，啊，结束了：
  如果没看到【🤑💰{102}\n】就跳转到【狠狠地输出f，啊，结束了】喵
  把【👄】替换成【f👄】喵
狠狠地输出f，啊，结束了：
  如果没看到【🤑💰{103}\n】就跳转到【狠狠地输出g，啊，结束了】喵
  把【👄】替换成【g👄】喵
狠狠地输出g，啊，结束了：
  如果没看到【🤑💰{104}\n】就跳转到【狠狠地输出h，啊，结束了】喵
  把【👄】替换成【h👄】喵
狠狠地输出h，啊，结束了：
  如果没看到【🤑💰{105}\n】就跳转到【狠狠地输出i，啊，结束了】喵
  把【👄】替换成【i👄】喵
狠狠地输出i，啊，结束了：
  如果没看到【🤑💰{106}\n】就跳转到【狠狠地输出j，啊，结束了】喵
  把【👄】替换成【j👄】喵
狠狠地输出j，啊，结束了：
  如果没看到【🤑💰{107}\n】就跳转到【狠狠地输出k，啊，结束了】喵
  把【👄】替换成【k👄】喵
狠狠地输出k，啊，结束了：
  如果没看到【🤑💰{108}\n】就跳转到【狠狠地输出l，啊，结束了】喵
  把【👄】替换成【l👄】喵
狠狠地输出l，啊，结束了：
  如果没看到【🤑💰{109}\n】就跳转到【狠狠地输出m，啊，结束了】喵
  把【👄】替换成【m👄】喵
狠狠地输出m，啊，结束了：
  如果没看到【🤑💰{110}\n】就跳转到【狠狠地输出n，啊，结束了】喵
  把【👄】替换成【n👄】喵
狠狠地输出n，啊，结束了：
  如果没看到【🤑💰{111}\n】就跳转到【狠狠地输出o，啊，结束了】喵
  把【👄】替换成【o👄】喵
狠狠地输出o，啊，结束了：
  如果没看到【🤑💰{112}\n】就跳转到【狠狠地输出p，啊，结束了】喵
  把【👄】替换成【p👄】喵
狠狠地输出p，啊，结束了：
  如果没看到【🤑💰{113}\n】就跳转到【狠狠地输出q，啊，结束了】喵
  把【👄】替换成【q👄】喵
狠狠地输出q，啊，结束了：
  如果没看到【🤑💰{114}\n】就跳转到【狠狠地输出r，啊，结束了】喵
  把【👄】替换成【r👄】喵
狠狠地输出r，啊，结束了：
  如果没看到【🤑💰{115}\n】就跳转到【狠狠地输出s，啊，结束了】喵
  把【👄】替换成【s👄】喵
狠狠地输出s，啊，结束了：
  如果没看到【🤑💰{116}\n】就跳转到【狠狠地输出t，啊，结束了】喵
  把【👄】替换成【t👄】喵
狠狠地输出t，啊，结束了：
  如果没看到【🤑💰{117}\n】就跳转到【狠狠地输出u，啊，结束了】喵
  把【👄】替换成【u👄】喵
狠狠地输出u，啊，结束了：
  如果没看到【🤑💰{118}\n】就跳转到【狠狠地输出v，啊，结束了】喵
  把【👄】替换成【v👄】喵
狠狠地输出v，啊，结束了：
  如果没看到【🤑💰{119}\n】就跳转到【狠狠地输出w，啊，结束了】喵
  把【👄】替换成【w👄】喵
狠狠地输出w，啊，结束了：
  如果没看到【🤑💰{120}\n】就跳转到【狠狠地输出x，啊，结束了】喵
  把【👄】替换成【x👄】喵
狠狠地输出x，啊，结束了：
  如果没看到【🤑💰{121}\n】就跳转到【狠狠地输出y，啊，结束了】喵
  把【👄】替换成【y👄】喵
狠狠地输出y，啊，结束了：
  如果没看到【🤑💰{122}\n】就跳转到【狠狠地输出z，啊，结束了】喵
  把【👄】替换成【z👄】喵
狠狠地输出z，啊，结束了：
  把【👉\.】替换成【.👉】喵
  如果看到【^】就跳转到【接下来干嘛呢】喵
```

处理输入的部分……哦我们不支持输入啊？

看看你的：

```
暂时还看不了你的，抱歉喵
把【👉,】替换成【,👉】喵
如果看到【^】就跳转到【接下来干嘛呢】喵
```

### 循环

最后是 `[` 和 `]`，这两个操作稍微复杂一些，因为它们能嵌套，这个时候就要用到之前的🔄了。

`[` 需要按条件操作👉移到 `]` 处，既然是快进那当然……

绯红之王：

```
  把【👉\[】替换成【[👉】喵
  如果看到【🤑💰】就跳转到【接下来干嘛呢】喵
往右边卷死丫的：
  把【👉(.)】替换成【\1👉】喵
  如果没看到【\[👉】就跳转到【绯红之王就是说家人们怎么循环开头把我鸽了，下头】喵
  把【🔄】替换成【🔄🟢】喵
绯红之王就是说家人们怎么循环开头把我鸽了，下头：
  如果没看到【\]👉】就跳转到【绯红之王就是说家人们怎么循环结尾把我鸽了，下头】喵
  如果没看到【🔄🟢】就跳转到【接下来干嘛呢】喵
  把【🔄🟢】替换成【🔄】喵
绯红之王就是说家人们怎么循环结尾把我鸽了，下头：
  如果看到【^】就跳转到【往右边卷死丫的】喵
```

`]` 自然就是……

败者食尘：

```
  如果看到【🤑💰】就跳转到【往左边卷死丫的】喵
  把【👉\]】替换成【]👉】喵
  如果看到【^】就跳转到【接下来干嘛呢】喵
往左边卷死丫的：
  把【(.)👉】替换成【👉\1】喵
  如果没看到【👉\]】就跳转到【败者食尘就是说家人们怎么循环结尾把我鸽了，下头】喵
  把【🔄】替换成【🔄🟢】喵
败者食尘就是说家人们怎么循环结尾把我鸽了，下头：
  如果没看到【👉\[】就跳转到【败者食尘就是说家人们怎么循环开头把我鸽了，下头】喵
  如果没看到【🔄🟢】就跳转到【接下来干嘛呢】喵
  把【🔄🟢】替换成【🔄】喵
败者食尘就是说家人们怎么循环开头把我鸽了，下头：
  如果看到【^】就跳转到【往左边卷死丫的】喵
```

### 最后居然发生了……？

如果👉后面再也没有指令了，这个时候说明程序执行结束了。

此时把所有👄里保存的字符留下，剩下都删掉就好了。

就像我们的从前，

已经回不去了：

```
把【.*\n(.*)👄(.|\n)*】替换成【\1】喵
```

## 别忘了

关注 MaxXing 喵，关注 MaxXing……

谢谢喵
